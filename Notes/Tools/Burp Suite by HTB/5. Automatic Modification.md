
We may want to apply certain modifications to all outgoing HTTP requests or all incoming HTTP responses in certain situations. In these cases, we can utilize automatic modifications based on rules we set, so the web proxy tools will automatically apply them.

---

## Automatic Request Modification

Let us start with an example of automatic request modification. We can choose to match any text within our requests, either in the request header or request body, and then replace it with different text. For the sake of demonstration, let's replace our `User-Agent` with `HackTheBox Agent 1.0`, which may be handy in cases where we may be dealing with filters that block certain User-Agents.

#### Burp Match and Replace

We can go to (`Proxy>Proxy settings>HTTP match and replace rules`) and click on `Add` in Burp. As the screenshot below shows, we will set the following options:

![Match/replace rule dialog for request header, matching '^User-Agent.*$', replacing with 'User-Agent: HackTheBox Agent 1.0', regex enabled, OK and Cancel buttons.](https://cdn.services-k8s.prod.aws.htb.systems/content/modules/110/burp_match_replace_user_agent_1.png)

|||
|---|---|
|`Type`: `Request header`|Since the change we want to make will be in the request header and not in its body.|
|`Match`: `^User-Agent.*$`|The regex pattern that matches the entire line with `User-Agent` in it.|
|`Replace`: `User-Agent: HackTheBox Agent 1.0`|This is the value that will replace the line we matched above.|
|`Regex match`: True|We don't know the exact User-Agent string we want to replace, so we'll use regex to match any value that matches the pattern we specified above.|

Once we enter the above options and click `Ok`, our new Match and Replace option will be added and enabled and will start automatically replacing the `User-Agent` header in our requests with our new User-Agent. We can verify that by visiting any website using the pre-configured Burp browser and reviewing the intercepted request. We will see that our User-Agent has indeed been automatically replaced:

![HTTP request details with 'User-Agent: HackTheBox Agent 1.0', buttons: Forward, Drop, Intercept is on, Action, Open Browser.](https://cdn.services-k8s.prod.aws.htb.systems/content/modules/110/burp_match_replace_user_agent_2.png)


---

---

Let us go back to (`Proxy>Options>Match and Replace`) in Burp to add another rule. This time we will use the type of `Response body` since the change we want to make exists in the response's body and not in its headers. In this case, we do not have to use regex as we know the exact string we want to replace, though it is possible to use regex to do the same thing if we prefer.

![Match/replace rule dialog for response body, matching 'type="number"', replacing with 'type="text"', OK and Cancel buttons.](https://cdn.services-k8s.prod.aws.htb.systems/content/modules/110/burp_match_replace_response_1.png)