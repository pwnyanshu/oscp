
### Wordlist to use

```
locate subdomains-top1million
```
![[Pasted image 20251102173933.png]]

---

### VHost

We cant directly fuzz the ip for sub-domain we will have to add it to vhosts
```
/etc/hosts
```

---
- **What’s a subdomain**  
    A DNS label under a domain (e.g., `exam.ssbace.com`) — purely a name-to-IP mapping in DNS. It tells the world _where_ to connect (via A/AAAA/CNAME records) but says nothing about what will be served once you arrive.
    
- **What’s a vhost (virtual host)**  
    A web-server configuration (Apache/Nginx) that maps an incoming `Host` header (and SNI for TLS) to a site/config on that server. It decides _which_ site or content the server returns after a connection reaches the IP.
    
- **Why discovery differs for each**  
    Subdomain discovery checks DNS (does the name resolve?), while vhost discovery checks server behavior (if you connect to the IP and present that hostname, does the server serve different content?). Wildcard DNS or shared IPs break pure DNS scanning — you must fuzz the Host/SNI to reveal hidden vhosts and avoid false positives.
---
### Subdomain

```
ffuf -w /usr/share/seclists/Discovery/DNS/subdomains-top1million-5000.txt:FUZZ -u http://FUZZ.inlanefreight.com
```
![[Pasted image 20251102175656.png]]

---

### Vhosts

we were able to fuzz public sub-domains using public DNS records. However, when it came to fuzzing sub-domains that do not have a public DNS record or sub-domains under websites that are not public, we could not use the same method.
We will have to do vhosts fuzzing

VHosts may or may not have public DNS records, still can act as a subdomain

if we use the `sub-domain fuzzing`, we would only be able to identify public sub-domains but will not identify any sub-domains that are not public.

To scan for VHosts, without manually adding the entire wordlist to our `/etc/hosts`, we will be fuzzing HTTP headers, specifically the `Host:` header. To do that, we can use the `-H` flag to specify a header and will use the `FUZZ` keyword within it, as follows:

```shell-session
ffuf -w /opt/useful/seclists/Discovery/DNS/subdomains-top1million-5000.txt:FUZZ -u http://academy.htb:PORT/ -H 'Host: FUZZ.academy.htb'
```
![[Pasted image 20251103155209.png]]

So, we know that we will always get `200 OK`. However, if the VHost does exist and we send a correct one in the header, we should get a different response size, as in that case, we would be getting the page from that VHosts, which is likely to show a different page.

![[Pasted image 20251103154944.png]]
![[Pasted image 20251103154829.png]]

so, we will need filtering for this, refer Filtering Results